function getStatsHtml(t){var e="",a=[],n=0;for(var o in t)a.push({tagName:o,freq:t[o]}),n+=t[o];document.getElementById("tag-number").innerHTML=a.length.toString(),document.getElementById("total-tags").innerHTML=n.toString(),a.sort(function(t,e){return t.tagName<e.tagName?-1:t.tagName>e.tagName?1:0});for(var r=0;r<a.length;r++)e+='<tr data-tag="'+a[r].tagName+'"><td><code>&lt;'+a[r].tagName+'&gt;</code></td><td class="border-left">'+a[r].freq+'</td><td class="border-left"><div class="bar" style="width:'+Math.ceil(a[r].freq/n*BAR_MAX)+'px;"></div></td></tr>';return e}function onmouseover(t){chrome.tabs.sendMessage(tabId,{highlightTags:!0,tagName:t.currentTarget.dataset.tag},function(){})}function onmouseout(){chrome.tabs.sendMessage(tabId,{highlightTags:!0},function(){})}var BAR_MAX=200,tabId;chrome.tabs.query({active:!0,currentWindow:!0},function(t){tabId=t[0].id,chrome.tabs.sendMessage(tabId,{countTags:!0},function(t){var e=document.getElementById("table-body");e.innerHTML=getStatsHtml(t);for(var a=e.childNodes,n=0;n<a.length;n++)a[n].addEventListener("mouseover",onmouseover),a[n].addEventListener("mouseout",onmouseout)})});