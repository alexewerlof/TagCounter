<!doctype html>
<html ng-app="popup" ng-csp>
<head>
    <script src="js/angular.js"></script>
    <script src="js/popup.js"></script>
    <script src="js/tagtype.js"></script>
    <meta charset="UTF-8">
    <title>TagCounter</title>
    <link rel="stylesheet" href="style/popup.css"/>
</head>
<body ng-controller="TagCounterCtrl">
<ul id="toolbar">
    <li ng-repeat="(key, value) in tagTypes">
        <label>
            <input type="checkbox" ng-model="value.show" />
            <i class="toolbar-button icon-{{key}}"
               ng-class="value.show ? 'selected' : 'not-selected'"
               title="{{value.desc}}"></i>
        </label>
    </li>
    <li>|</li>
    <li>
        <i class="toolbar-button icon-refresh"
           ng-click="updateStats()"
           title="Refresh"></i>
    </li>
</ul>

<table>
    <colgroup>
        <col class="tag-col">
        <col class="count-col">
        <col class="grid-col" span="4">
    </colgroup>
    <thead>
    <tr>
        <th>
            <a href="javascript:void(0)" ng-click="headerClicked('name')" title="Sort by tag name">Tags</a>
            <i ng-class="isReversedSort ? 'icon-down' : 'icon-up'" ng-show="sortingComponent === 'name'"></i><br/>
        </th>

        <th colspan="5"
            class="border-left">
            <a href="javascript:void(0)" ng-click="headerClicked('freq')" title="Sort by tag number">Count</a>
            <i ng-class="isReversedSort ? 'icon-down' : 'icon-up'" ng-show="sortingComponent === 'freq'"></i><br/>
        </th>
    </tr>
    <tr>
        <th>
            <span class="subtle-text" title="There are {{tagNumber}} tags in this page">{{tagNumber}}</span>
        </th>
        <th class="border-left">
            <span class="subtle-text" title="There are {{elementNumber}} elements in this page">{{elementNumber}}</span>
        </th>
        <th class="grid-number subtle-text">
            25%
        </th>
        <th class="grid-number subtle-text">
            50%
        </th>
        <th class="grid-number subtle-text">
            75%
        </th>
        <th class="grid-number subtle-text">
            100%
        </th>
    </tr>
    </thead>
    <!-- this will be filled in popup.js -->
    <tbody ng-repeat="tag in tags | filter: isTagShown | orderBy:sortingComponent:isReversedSort">
        <tr class="tag-row">
            <th rowspan="2"
                class="highlight-on-hover"
                ng-mouseenter="highlightTags(tag.name)"
                ng-mouseleave="unhighlight()">
                <i class="icon-{{tag.type}} subtle-text"
                    title="{{tag.type}} tag"></i>
                <code>{{tag.name}}</code>
            </th>
            <td rowspan="2"
                class="border-left">
                {{tag.freq}}
            </td>
            <td class="border-right"></td>
            <td class="border-right"></td>
            <td class="border-right"></td>
            <td class="border-right"></td>
        </tr>
        <tr>
            <td colspan="4"
                class="bar-cell">
                <div class="bar-container"
                     title="{{tag.percent}}%">
                    <div class="bar" style="width:{{tag.percent}}%;"></div>
                </div>
            </td>
        </tr>
    </tbody>
</table>
</body>
</html>